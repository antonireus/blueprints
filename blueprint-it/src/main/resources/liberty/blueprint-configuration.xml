<server>
    <!--
    Aquest fitxer ha d'anar dins: servers\defaultServer\configDropins\overrides
    -->

    <dataSource jndiName="jdbc/blueprintDB" type="javax.sql.XADataSource" id="blueprintDB">
        <jdbcDriver libraryRef="blueprintSharedLib" />
        <properties.postgresql
                databaseName="blueprint"
                serverName="localhost"
                portNumber="5432"
                user="blueprint"
                password="blueprint" />
    </dataSource>

    <library id="blueprintSharedLib">
        <fileset dir="${shared.resource.dir}" includes="*.jar"/>
    </library>

    <!--
    Liberty necessita que els MDB s'activin manualment dins la seva configuració
    Veure l'opció 2.B de:
    https://www.ibm.com/support/knowledgecenter/SSEQTP_liberty/com.ibm.websphere.wlp.doc/ae/twlp_dep_msg_mdbsib.html

    L'ID és "nomEARsenseExtensio"/"nomMòdulEJBSenseExtensio"/"NomMDB"
    Normalment el nom de l'ear tocaria ser blueprint, però al deploy amb liberty no se li pot especificar
    i agafa el nom de l'artifactId
    -->
    <messagingEngine>
        <queue id="MailQueue" />
    </messagingEngine>

    <jmsActivationSpec id="blueprint-ear/blueprint-ejb-0.9/MailServiceQueue">
        <properties.wasJms destinationRef="java:app/jms/MailQueue" />
    </jmsActivationSpec>

    <!--
    <jmsQueue id="jms/MailQueue" jndiName="java:app/jms/MailQueue">
        <properties.wasJms queueName="MailQueue"/>
    </jmsQueue>
    -->

</server>
